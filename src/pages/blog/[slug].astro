---
import { getCollection } from 'astro:content';
import Header from '../../components/Header.astro';

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{entry.data.title} - Блог о разработке</title>
  <link rel="stylesheet" href="/src/styles/global.css">
</head>
<body>
  <Header />
  <header class="article-header">
    <div class="header-content">
      <a href="/" class="back-link">&larr; Назад ко всем статьям</a>
      <h1 class="article-header-title">{entry.data.title}</h1>
      <p class="article-header-meta">
        Опубликовано <time datetime={entry.data.pubDate.toISOString()}>
          {new Date(entry.data.pubDate).toLocaleDateString('ru-RU', { year: 'numeric', month: 'long', day: 'numeric' })}
        </time>
      </p>
    </div>
  </header>

  <main>
    <article class="article-container">
      {entry.data.image && <img src={entry.data.image} alt="" class="article-image" />}
      <div class="article-content">
        <Content />
      </div>
    </article>
  </main>
</body>
</html>
